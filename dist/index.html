<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Speedrun Splitter</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
<main>
    <!-- Run Header (separate from table) -->
    <div class="run-header">
      <div class="run-icon">üèÅ</div>
      <div class="run-title" id="run-title">Run Title</div>
    </div>
    
    <table class="splits-table">
      <thead>
        <tr class="columns">
          <th>Split</th>
          <th>Total</th>
          <th>This Segment</th>
          <th title="Diff vs Best Total">Diff<sub>T</sub></th>
          <th title="Diff vs Best This Segment">Diff<sub>SEG</sub></th>
          <th title="Diff vs Best Complete Run">Diff<sub>BCR</sub></th>
          <th title="Best Total">Best<sub>T</sub></th>
          <th title="Best This Segment">Best<sub>SEG</sub></th>
          <th title="Best Complete Run">BCR</th>
        </tr>
      </thead>
      <tbody id="splits-body">
        <!-- rows injected by main.js -->
      </tbody>
    </table>
    
    <!-- Summary Statistics Table -->
    <table class="summary-table">
      <tbody>
        <tr>
          <td class="summary-label">Current Total Timer</td>
          <td id="total-timer" class="summary-value">00:00.000</td>
        </tr>
        <tr>
          <td class="summary-label">Best Complete Run:</td>
          <td id="best-complete" class="summary-value">‚Äî</td>
        </tr>
        <tr>
          <td class="summary-label">Sum of Best Segments:</td>
          <td id="sum-best-segments" class="summary-value">‚Äî</td>
        </tr>
      </tbody>
    </table>
  </main>
  <!-- Config Modal -->
  <div id="cfg-backdrop" class="modal-backdrop" hidden>
    <div class="modal config-modal">
      <header>
        <h3>Configuration</h3>
      </header>
      
      <!-- Tab Navigation -->
      <div class="config-tabs">
        <button type="button" class="config-tab active" data-tab="general">General</button>
        <button type="button" class="config-tab" data-tab="table">Table</button>
        <button type="button" class="config-tab" data-tab="colors">Colors</button>
        <button type="button" class="config-tab" data-tab="splits">Splits</button>
      </div>
      
      <section>
        <form id="cfg-form">
          <!-- General Tab -->
          <div class="config-tab-content active" data-tab="general">
            <div class="cfg-section">
              <label>Run Title
                <input id="cfg-title" name="run-title" type="text" placeholder="Run Title" />
              </label>
              <div class="cfg-file">
                <label>Run Icon
                  <div class="cfg-icon-container">
                    <img id="cfg-icon-preview" src="" alt="" style="display: none; width: 32px; height: 32px; object-fit: contain; cursor: pointer; border: 1px solid #2a2d37; border-radius: 4px; margin-right: 8px;">
                    <input id="cfg-icon-path" name="icon-path" type="text" placeholder="No icon selected" readonly />
                  </div>
                </label>
                <div class="cfg-file-actions">
                  <button type="button" id="cfg-choose-icon">Choose Icon‚Ä¶</button>
                  <button type="button" id="cfg-clear-icon">Clear</button>
                </div>
              </div>
              
              
              <div class="font-settings">
                <label class="setting-row">
                  <span>Font Family:</span>
                  <select id="global-font-family">
                    <option value="system-ui">System UI</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Courier New">Courier New</option>
                  </select>
                </label>
                <label class="setting-row">
                  <span>Total Timer Font Size:</span>
                  <input type="number" id="total-timer-font-size" name="total-timer-font-size" value="24" min="8" max="60" step="1">
                  <span>px</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="total-timer-bold" name="total-timer-bold">
                  <span>Bold Total Timer</span>
                </label>
                <label class="setting-row">
                  <span>Summary Font Size:</span>
                  <input type="number" id="summary-font-size" name="summary-font-size" value="16" min="8" max="60" step="1">
                  <span>px</span>
                </label>
              </div>
              
              <div class="summary-toggles">
                <label class="checkbox-label">
                  <input type="checkbox" id="show-sum-best" name="show-sum-best" checked>
                  <span>Show Sum of Best Segments</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="show-best-complete" name="show-best-complete" checked>
                  <span>Show Best Complete Run</span>
                </label>
              </div>
            </div>
          </div>
          
          <!-- Table Tab -->
          <div class="config-tab-content" data-tab="table">
            <div class="cfg-section">
              <label>Row Height and Spacing</label>
              <div class="table-settings">
                <label class="setting-row">
                  <span>Row Height Preset:</span>
                  <select id="row-height-preset">
                    <option value="custom">Custom</option>
                    <option value="compact">Compact</option>
                    <option value="normal" selected>Normal</option>
                    <option value="large">Large</option>
                    <option value="extra-large">Extra Large</option>
                  </select>
                </label>
                <label class="setting-row">
                  <span>Split Table Font Size:</span>
                  <input type="number" id="split-table-font-size" name="split-table-font-size" value="14" min="8" max="60" step="1">
                  <span>px</span>
                </label>
              </div>
              <table class="row-height-config-table">
                <thead>
                  <tr>
                    <th>Property</th>
                    <th>Value (px)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Row Height</td>
                    <td><input type="number" id="row-height-value" value="36" min="1" max="200" step="1"></td>
                  </tr>
                  <tr>
                    <td>Padding Top</td>
                    <td><input type="number" id="row-padding-top" value="8" min="0" max="50" step="1"></td>
                  </tr>
                  <tr>
                    <td>Padding Bottom</td>
                    <td><input type="number" id="row-padding-bottom" value="8" min="0" max="50" step="1"></td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div class="cfg-section">
              <label>Column Configuration</label>
              <table class="column-config-table">
                <thead>
                  <tr>
                    <th>Column</th>
                    <th>Visible</th>
                    <th>Width (px)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Split</td>
                    <td><input type="checkbox" id="col-split" checked></td>
                    <td><input type="number" id="col-split-width" value="150" min="50" max="400" step="1"></td>
                  </tr>
                  <tr>
                    <td>Total</td>
                    <td><input type="checkbox" id="col-total" checked></td>
                    <td><input type="number" id="col-total-width" value="100" min="50" max="400" step="1"></td>
                  </tr>
                  <tr>
                    <td>This Segment</td>
                    <td><input type="checkbox" id="col-segment" checked></td>
                    <td><input type="number" id="col-segment-width" value="100" min="50" max="400" step="1"></td>
                  </tr>
                  <tr>
                    <td>Diff vs Best Total</td>
                    <td><input type="checkbox" id="col-diff" checked></td>
                    <td><input type="number" id="col-diff-width" value="80" min="50" max="400" step="1"></td>
                  </tr>
                  <tr>
                    <td>Diff vs Best This Segment</td>
                    <td><input type="checkbox" id="col-diff-segment" checked></td>
                    <td><input type="number" id="col-diff-segment-width" value="80" min="50" max="400" step="1"></td>
                  </tr>
                  <tr>
                    <td>Diff vs Best Complete Run</td>
                    <td><input type="checkbox" id="col-diff-complete" checked></td>
                    <td><input type="number" id="col-diff-complete-width" value="80" min="50" max="400" step="1"></td>
                  </tr>
                  <tr>
                    <td>Best Total</td>
                    <td><input type="checkbox" id="col-best-total" checked></td>
                    <td><input type="number" id="col-best-total-width" value="100" min="50" max="400" step="1"></td>
                  </tr>
                  <tr>
                    <td>Best This Segment</td>
                    <td><input type="checkbox" id="col-best-segment" checked></td>
                    <td><input type="number" id="col-best-segment-width" value="100" min="50" max="400" step="1"></td>
                  </tr>
                  <tr>
                    <td>Best Complete Run</td>
                    <td><input type="checkbox" id="col-best-complete" checked></td>
                    <td><input type="number" id="col-best-complete-width" value="100" min="50" max="400" step="1"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- Colors Tab -->
          <div class="config-tab-content" data-tab="colors">
            <div class="cfg-section">
              <label>App Colors</label>
              <div class="color-settings">
                <label class="setting-row">
                  <span>Background Color:</span>
                  <div class="color-input-group">
                    <input type="color" id="background-color-picker" name="background-color-picker" value="#0e0f13">
                    <input type="text" id="background-color-hex" name="background-color" value="#0e0f13" placeholder="#0e0f13" maxlength="20">
                  </div>
                </label>
              </div>
            </div>
            
            <div class="cfg-section">
              <label>Text Colors</label>
              <div class="color-settings">
                <label class="setting-row">
                  <span>Run Title Color:</span>
                  <div class="color-input-group">
                    <input type="color" id="run-title-color-picker" name="run-title-color-picker" value="#c9d1d9">
                    <input type="text" id="run-title-color-hex" name="run-title-color" value="#c9d1d9" placeholder="#c9d1d9" maxlength="20">
                  </div>
                </label>
                <label class="setting-row">
                  <span>Split Table Text Color:</span>
                  <div class="color-input-group">
                    <input type="color" id="split-table-color-picker" name="split-table-color-picker" value="#c9d1d9">
                    <input type="text" id="split-table-color-hex" name="split-table-color" value="#c9d1d9" placeholder="#c9d1d9" maxlength="20">
                  </div>
                </label>
                <label class="setting-row">
                  <span>Total Timer Text Color:</span>
                  <div class="color-input-group">
                    <input type="color" id="total-timer-text-color-picker" name="total-timer-text-color-picker" value="#8b9bb4">
                    <input type="text" id="total-timer-text-color-hex" name="total-timer-text-color" value="#8b9bb4" placeholder="#8b9bb4" maxlength="20">
                  </div>
                </label>
                <label class="setting-row">
                  <span>Total Timer Digits Color:</span>
                  <div class="color-input-group">
                    <input type="color" id="total-timer-digits-color-picker" name="total-timer-digits-color-picker" value="#c9d1d9">
                    <input type="text" id="total-timer-digits-color-hex" name="total-timer-digits-color" value="#c9d1d9" placeholder="#c9d1d9" maxlength="20">
                  </div>
                </label>
                
                <label class="setting-row">
                  <span>Sum of Best Segments Color:</span>
                  <div class="color-input-group">
                    <input type="color" id="sum-best-segments-color-picker" name="sum-best-segments-color-picker" value="#c9d1d9">
                    <input type="text" id="sum-best-segments-color-hex" name="sum-best-segments-color" value="#c9d1d9" placeholder="#c9d1d9" maxlength="20">
                  </div>
                </label>
                
                <label class="setting-row">
                  <span>Best Complete Run Color:</span>
                  <div class="color-input-group">
                    <input type="color" id="best-complete-run-color-picker" name="best-complete-run-color-picker" value="#c9d1d9">
                    <input type="text" id="best-complete-run-color-hex" name="best-complete-run-color" value="#c9d1d9" placeholder="#c9d1d9" maxlength="20">
                  </div>
                </label>
              </div>
            </div>
            
            <div class="cfg-section">
              <label>Table Colors</label>
              <div class="color-settings">
                <label class="setting-row">
                  <span>Split Table Background #1:</span>
                  <div class="color-input-group">
                    <input type="color" id="split-bg-1-color-picker" name="split-bg-1-color-picker" value="#ffffff">
                    <input type="text" id="split-bg-1-color-hex" name="split-bg-1-color" value="#0000000a" placeholder="#0000000a" maxlength="20">
                  </div>
                </label>
                <label class="setting-row">
                  <span>Split Table Background #2:</span>
                  <div class="color-input-group">
                    <input type="color" id="split-bg-2-color-picker" name="split-bg-2-color-picker" value="#000000">
                    <input type="text" id="split-bg-2-color-hex" name="split-bg-2-color" value="#00000015" placeholder="#00000015" maxlength="20">
                  </div>
                </label>
              </div>
            </div>
          </div>
          
          <!-- Splits Tab -->
          <div class="config-tab-content" data-tab="splits">
            <div class="cfg-section">
              <label>Number of splits
                <input id="cfg-count" name="split-count" type="number" min="1" max="50" value="3" />
              </label>
              <table class="cfg-table">
                <thead><tr><th>#</th><th>Icon</th><th>Name</th></tr></thead>
                <tbody id="cfg-splits"></tbody>
              </table>
            </div>
          </div>
          
          <div class="cfg-actions">
            <button type="button" id="cfg-cancel">Cancel</button>
            <button type="button" id="cfg-reset-storage" title="Clear PBs and settings">Reset Saved Values</button>
            <button type="submit" id="cfg-save">Save</button>
          </div>
        </form>
      </section>
    </div>
  </div>
  <!-- In-app File Picker Modal -->
  <div id="file-backdrop" class="modal-backdrop" hidden>
    <div class="modal">
      <header>
        <h3>Choose Save File</h3>
      </header>
      <section>
        <div class="fp-toolbar">
          <div class="fp-path">Path: <span id="fp-path"></span></div>
          <div class="fp-nav">
            <button type="button" id="fp-home">Home</button>
            <button type="button" id="fp-up">Up</button>
          </div>
        </div>
        <div id="fp-list" class="fp-list" role="listbox" aria-label="Files and folders"></div>
        <div class="fp-name">
          <label>File name
            <input id="fp-filename" type="text" placeholder="splits.json" />
          </label>
        </div>
        <div class="cfg-actions">
          <button type="button" id="fp-cancel">Cancel</button>
          <button type="button" id="fp-choose">Choose</button>
        </div>
      </section>
    </div>
  </div>

  <!-- Icon Selector Modal -->
  <div id="icon-selector-modal" class="modal-backdrop hidden">
    <div class="modal icon-selector">
      <header class="modal-header">
        <h2>Choose Split Icon</h2>
        <button type="button" id="icon-close" class="close-btn">&times;</button>
      </header>
      
      <section class="icon-gallery-container">
        <div class="icon-actions">
          <button type="button" id="icon-add-custom">Add Custom Icon</button>
          <button type="button" id="icon-remove-selected" class="danger" disabled>Remove Selected</button>
        </div>
        
        <div id="icon-gallery" class="icon-gallery">
          <!-- Icons will be populated here -->
        </div>
      </section>
      
      <div class="modal-actions">
        <button type="button" id="icon-cancel">Cancel</button>
        <button type="button" id="icon-select" disabled>Select Icon</button>
      </div>
    </div>
  </div>

  <script type="module" src="./main.js"></script>
</body>
</html>
